<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AWINT 2027</title>
  <link rel="stylesheet" href="style.css">

  <meta name="keywords" content="liste asint 2026, tmsp, sudparis, imtbs, kentucky2026, kentucky, 2027">

  <script>
    function setViewportHeight() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    setViewportHeight();
    window.addEventListener('resize', setViewportHeight);
  </script>
</head>

<body>

  <header class="navbar">
    <div class="nav-container">
      <div class="logo"><img src="images/logo.webp">AWINT 2027</div>
      <nav class="nav-links">
        <a href="index.html">HOMME</a>
        <a href="orga.html">OWGANNIGWRAMME</a>
        <a href="nous.html">LA TCHEAM</a>
        <a href="events.html">EWENTS</a>
      </nav>
    </div>
  </header>

  <main>

    <!-- ABOUT (Sticky Image Scroll Section) -->
    <section id="about" class="about-text-section">
      <div class="about-text-container">
        <h2>Owganisawtion owo</h2>
        <p>
          Vouuus voulews compwwehendre commwent fonctwionne notwe wiste ? OwO<br>
          Voici notwe owganigwamme et mon intewpwetation infowmatik de celui-ci qui mawche suw owrdinateuw, et encowe
          (>w<). </p>
      </div>
    </section>




    <section id="orga" class="orga-full-view">
      <div class="orga-container" style="text-align: center; padding: 10px 0;">
        <img src="images/orga.webp" id="clickable-orga" alt="Organigramme">
      </div>
    </section>

    <div id="image-viewer" class="image-overlay">
      <span class="close-viewer">&times;</span>
      <img class="viewer-content" id="full-image">
    </div>




    <section class="carousel-section">
      <div class="scene">
        <div class="carousel" id="carousel">
          <!-- Sous-carousel 1 -->
          <div class="carousel-wheel" data-wheel="0">
            <div class="sub-carousel">
              <img src="images/max.webp">
              <img src="images/math.webp">
              <img src="images/theo.webp">
              <img src="images/ilyes.webp">
              <img src="images/warren.webp">
            </div>
          </div>
          <!-- Sous-carousel 2 -->
          <div class="carousel-wheel" data-wheel="1">
            <div class="sub-carousel">
              <img src="images/clementine.webp">
              <img src="images/aram.webp">
              <img src="images/clementine.webp">
              <img src="images/aram.webp">
              <img src="images/clementine.webp">
              <img src="images/aram.webp">
            </div>
          </div>
          <!-- Sous-carousel 3 -->
          <div class="carousel-wheel" data-wheel="2">
            <div class="sub-carousel">
              <img src="images/leonard.webp">
              <img src="images/rayan_o.webp">
              <img src="images/leonard.webp">
              <img src="images/rayan_o.webp">
            </div>
          </div>

          <div class="carousel-wheel" data-wheel="3">
            <div class="sub-carousel">
              <img src="images/nabil.webp">
              <img src="images/swann.webp">
              <img src="images/maya.webp">
              <img src="images/ryan.webp">
            </div>
          </div>


          <div class="carousel-wheel" data-wheel="4">
            <div class="sub-carousel">
              <img src="images/chloe.webp">
              <img src="images/tim.webp">
              <img src="images/rayan_o.webp">
              <img src="images/janelle.webp">
            </div>
          </div>

          <div class="carousel-wheel" data-wheel="5">
            <div class="sub-carousel">
              <img src="images/pablo.webp">
              <img src="images/asma.webp">
              <img src="images/junior.webp">
              <img src="images/sam.webp">
            </div>
          </div>

          <div class="carousel-wheel" data-wheel="6">
            <div class="sub-carousel">
              <img src="images/adrien.webp">
              <img src="images/robinson.webp">
              <img src="images/adrien.webp">
              <img src="images/robinson.webp">
            </div>
          </div>
          <div class="carousel-wheel" data-wheel="7">
            <div class="sub-carousel">
              <img src="images/ajyad_fun.webp">
              <img src="images/assiya.webp">
              <img src="images/asma.webp">
            </div>
          </div>
          <div class="carousel-wheel" data-wheel="8">
            <div class="sub-carousel">
              <img src="images/antony.webp">
              <img src="images/gaetan.webp">
            </div>
          </div>
          <div class="carousel-wheel" data-wheel="9">
            <div class="sub-carousel">
              <img src="./Cucco.webp">
              <img src="images/julia.webp">
            </div>
          </div>
          <div class="carousel-wheel" data-wheel="10">
            <div class="sub-carousel">
              <img src="./poulet.webp">
              <img src="images/elio.webp">
            </div>
          </div>
        </div>
      </div>
    </section>








  </main>

  <footer class="footer">
    <div class="footer-inner">
      <div>
        <div class="footer-label">mon snap owo</div>
        <div>psdews@kentucky2026.fw
        </div>
      </div>
      <div>
        <div class="footer-label">Cwéateuw owo</div>
        <div>psdews</div>
      </div>
      <div>
        <div class="footer-label">wait gal</div>
        <div>© 2067 owoINT</div>
      </div>
    </div>
  </footer>



  <script>
    (function initCarouselWheel() {

      const carousel = document.getElementById("carousel");
      const scene = document.querySelector(".scene");
      const carouselSection = document.querySelector(".carousel-section");
      const navbar = document.querySelector(".navbar");
      const wheels = Array.from(carousel.querySelectorAll(".carousel-wheel"));
      const total = wheels.length;
      const mainAngle = 360 / total;
      const mainRadius = 800;

      // ── Perspective / zoom ───────────────────────────────────────────────
      let perspective = 3000;
      const minPerspective = 500;      // negative perspective is invalid in CSS
      const maxPerspective = 400000;

      function updateZoom() {
        scene.style.perspective = `${perspective}px`;
      }

      // ── Place wheels in a ring ───────────────────────────────────────────
      wheels.forEach((wheel, i) => {
        wheel.style.transform = `rotateY(${i * mainAngle}deg) translateZ(${mainRadius}px)`;
      });

      // ── Initialise sub-carousels (cache counts so we don't re-query the DOM) ──
      const subCarousels = wheels.map(w => w.querySelector(".sub-carousel"));
      const subAngles = subCarousels.map(() => 0);
      const subCounts = subCarousels.map(sub => sub.querySelectorAll("img").length);
      const subRadius = 300;

      subCarousels.forEach((sub, wi) => {
        const n = subCounts[wi];
        const subAngle = 360 / n;
        Array.from(sub.querySelectorAll("img")).forEach((img, j) => {
          img.style.transform = `rotateY(${j * subAngle}deg) translateZ(${subRadius}px)`;
        });
      });

      // ── Rotation state ───────────────────────────────────────────────────
      let rotateX = 0;
      let rotateY = 0;

      function updateCarouselTransform() {
        carousel.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      }

      // Returns the index of the wheel currently facing the viewer.
      // Wheel[i] faces front when the main carousel has been rotated by -i*mainAngle,
      // so the front index = round(-rotateY / mainAngle).
      function getFrontWheelIndex() {
        let idx = Math.round(-rotateY / mainAngle) % total;
        if (idx < 0) idx += total;
        return idx;
      }

      function rotateSub(wheelIndex, direction) {
        const sub = subCarousels[wheelIndex];
        const subAngle = 360 / subCounts[wheelIndex];
        subAngles[wheelIndex] += direction * subAngle;
        sub.style.transform = `rotateY(${subAngles[wheelIndex]}deg)`;
      }

      // ── Pointer helpers ──────────────────────────────────────────────────
      // e.clientX can legitimately equal 0, so we cannot use || to detect
      // "no value". Check for touch events explicitly instead.

      function getClientCoords(e) {
        if (e.touches && e.touches.length > 0) {
          return { x: e.touches[0].clientX, y: e.touches[0].clientY };
        }
        return { x: e.clientX, y: e.clientY };
      }

      function getChangedCoords(e) {
        if (e.changedTouches && e.changedTouches.length > 0) {
          return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };
        }
        return { x: e.clientX, y: e.clientY };
      }

      // ── Drag handling ────────────────────────────────────────────────────
      let isDragging = false;
      let lastClientX = 0;
      let lastClientY = 0;
      let dragDistance = 0;
      const DRAG_THRESHOLD = 5; // px — below this a move is treated as a click

      function onPointerDown(e) {
        // Skip multi-touch (pinch); handled separately
        if (e.touches && e.touches.length >= 2) return;
        isDragging = true;
        dragDistance = 0;
        const { x, y } = getClientCoords(e);
        lastClientX = x;
        lastClientY = y;
        e.preventDefault();
      }

      function onPointerMove(e) {
        if (!isDragging) return;
        if (e.touches && e.touches.length >= 2) return; // pinch in progress

        const { x, y } = getClientCoords(e);
        const dx = x - lastClientX;
        const dy = y - lastClientY;

        dragDistance += Math.sqrt(dx * dx + dy * dy);

        rotateY += dx * 0.5;
        rotateX -= dy * 0.5;
        rotateX = Math.max(-90, Math.min(90, rotateX));

        updateCarouselTransform();

        lastClientX = x;
        lastClientY = y;
        e.preventDefault();
      }

      function onPointerUp(e) {
        if (!isDragging) return;
        isDragging = false;

        if (dragDistance < DRAG_THRESHOLD) {
          // Treat as a click
          const { x } = getChangedCoords(e);
          const clickedWheel = e.target.closest(".carousel-wheel");

          if (clickedWheel && carouselSection.contains(clickedWheel)) {
            const idx = wheels.indexOf(clickedWheel);
            if (idx !== -1) { rotateSub(idx, 1); return; }
          }

          // Zone-based fallback: left third → spin left, right third → spin right,
          // centre → spin front sub-carousel.
          const w = window.innerWidth;
          if (x < w * 0.33) {
            rotateY += mainAngle;
          } else if (x > w * 0.66) {
            rotateY -= mainAngle;
          } else {
            rotateSub(getFrontWheelIndex(), 1);
          }
          updateCarouselTransform();
        }
      }

      // mousedown/touchstart scoped to carousel so dragging outside never starts.
      // mousemove/mouseup stay on document so a fast drag that exits the section still ends cleanly.
      carouselSection.addEventListener("mousedown", onPointerDown);
      carouselSection.addEventListener("touchstart", onPointerDown, { passive: false });
      document.addEventListener("mousemove", onPointerMove);
      document.addEventListener("touchmove", onPointerMove, { passive: false });
      document.addEventListener("mouseup", onPointerUp);
      document.addEventListener("touchend", onPointerUp);

      // ── Keyboard shortcuts ───────────────────────────────────────────────
      document.addEventListener("keydown", e => {
        switch (e.key) {
          case "ArrowLeft": rotateY += mainAngle; updateCarouselTransform(); break;
          case "ArrowRight": rotateY -= mainAngle; updateCarouselTransform(); break;
          case "ArrowUp": rotateX = Math.max(-90, rotateX - 10); updateCarouselTransform(); break;
          case "ArrowDown": rotateX = Math.min(90, rotateX + 10); updateCarouselTransform(); break;
          case " ": rotateSub(getFrontWheelIndex(), 1); break;
          case "+": case "=":
            perspective = Math.min(maxPerspective, perspective + 500); updateZoom(); break;
          case "-": case "_":
            perspective = Math.max(minPerspective, perspective - 500); updateZoom(); break;
        }
      });

      // ── Mouse-wheel zoom (carousel section only) ─────────────────────────
      carouselSection.addEventListener("wheel", e => {
        const navRect = navbar.getBoundingClientRect();
        if (e.clientY <= navRect.bottom) return; // ignore area covered by fixed navbar
        e.preventDefault();
        const delta = e.deltaY > 0 ? 500 : -500;
        perspective = Math.max(minPerspective, Math.min(maxPerspective, perspective + delta));
        updateZoom();
      }, { passive: false });

      // ── Pinch-to-zoom ────────────────────────────────────────────────────
      // Must initialise lastPinchDistance on touchstart with 2 fingers,
      // otherwise the first touchmove frame is always skipped.
      let lastPinchDistance = 0;

      carouselSection.addEventListener("touchstart", e => {
        if (e.touches.length === 2) {
          lastPinchDistance = Math.hypot(
            e.touches[1].clientX - e.touches[0].clientX,
            e.touches[1].clientY - e.touches[0].clientY
          );
        }
      }, { passive: true });

      carouselSection.addEventListener("touchmove", e => {
        if (e.touches.length === 2 && lastPinchDistance > 0) {
          e.preventDefault();
          const t1 = e.touches[0], t2 = e.touches[1];
          const currentDistance = Math.hypot(
            t2.clientX - t1.clientX,
            t2.clientY - t1.clientY
          );
          const delta = (lastPinchDistance - currentDistance) * 10;
          perspective = Math.max(minPerspective, Math.min(maxPerspective, perspective + delta));
          updateZoom();
          lastPinchDistance = currentDistance;
        }
      }, { passive: false });

      // ── Initial render ───────────────────────────────────────────────────
      updateCarouselTransform();
      updateZoom();
    })();


    // ── Organigramme image viewer ─────────────────────────────────────────
    const viewer = document.getElementById('image-viewer');
    const clickableImg = document.getElementById('clickable-orga');
    const fullImg = document.getElementById('full-image');

    viewer.style.display = 'none';

    clickableImg.addEventListener('click', function () {
      fullImg.src = this.src;
      viewer.style.display = 'flex';
    });

    viewer.addEventListener('click', e => {
      if (e.target !== fullImg) viewer.style.display = 'none';
    });
  </script>





</body>

</html>